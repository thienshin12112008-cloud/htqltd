<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#667eea">
    
    <title>B√°o c√°o Chuy√™n c·∫ßn - L·ªõp N5K2</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="report.css">
    <link rel="stylesheet" href="pwa-style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1>üáØüáµ Dashboard Qu·∫£n L√Ω L·ªõp N5K2</h1>
            <p>H·ªá th·ªëng qu·∫£n l√Ω h·ªçc vi√™n Ti·∫øng Nh·∫≠t</p>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="navigation">
        <div class="container">
            <a href="index.html" class="nav-link">
                <span>üë•</span> H·ªçc vi√™n
            </a>
            <a href="attendance.html" class="nav-link">
                <span>‚úÖ</span> ƒêi·ªÉm danh
            </a>
            <a href="grades.html" class="nav-link">
                <span>üìù</span> B·∫£ng ƒëi·ªÉm
            </a>
            <a href="report.html" class="nav-link active">
                <span>üìä</span> Chuy√™n c·∫ßn
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- Th·ªëng k√™ t·ªïng quan -->
        <section class="stats-section">
            <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-info">
                    <h3>T·ªïng h·ªçc vi√™n</h3>
                    <p class="stat-number" id="totalStudents">0</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">üìÖ</div>
                <div class="stat-info">
                    <h3>T·ªïng bu·ªïi h·ªçc</h3>
                    <p class="stat-number" id="totalSessions">0</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-info">
                    <h3>ƒêi·ªÉm TB l·ªõp</h3>
                    <p class="stat-number" id="avgAttendance">0</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">‚ö†Ô∏è</div>
                <div class="stat-info">
                    <h3>H·ªçc sinh y·∫øu</h3>
                    <p class="stat-number" id="warningCount">0</p>
                </div>
            </div>
        </section>

        <!-- B·ªô l·ªçc -->
        <section class="filter-section">
            <div class="card">
                <h2>üîç B·ªô l·ªçc</h2>
                
                <!-- C√¥ng th·ª©c t√≠nh ƒëi·ªÉm -->
                <div class="formula-info">
                    <strong>üìê C√¥ng th·ª©c t√≠nh ƒëi·ªÉm t·ªïng:</strong>
                    <div class="formula">
                        ƒêi·ªÉm t·ªïng = (Chuy√™n c·∫ßn √ó 30%) + (ƒêi·ªÉm TB √ó 70%)
                    </div>
                    <small style="color: #666;">
                        * Chuy√™n c·∫ßn ƒë∆∞·ª£c quy ƒë·ªïi sang thang ƒëi·ªÉm 10<br>
                        * ƒêi·ªÉm TB l√† trung b√¨nh c√≥ h·ªá s·ªë c·ªßa c√°c b√†i ki·ªÉm tra
                    </small>
                </div>

                <div class="filter-group">
                    <div class="filter-item">
                        <label>Tr·∫°ng th√°i</label>
                        <select id="statusFilter">
                            <option value="all">T·∫•t c·∫£</option>
                            <option value="excellent">Xu·∫•t s·∫Øc (‚â•8)</option>
                            <option value="good">Kh√° (‚â•6.5)</option>
                            <option value="average">Trung b√¨nh (‚â•5)</option>
                            <option value="warning">Y·∫øu (<5)</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label>S·∫Øp x·∫øp</label>
                        <select id="sortFilter">
                            <option value="name-asc">T√™n A-Z</option>
                            <option value="name-desc">T√™n Z-A</option>
                            <option value="attendance-desc">ƒêi·ªÉm t·ªïng cao ‚Üí th·∫•p</option>
                            <option value="attendance-asc">ƒêi·ªÉm t·ªïng th·∫•p ‚Üí cao</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <button class="btn btn-primary" id="applyFilterBtn">√Åp d·ª•ng</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- B·∫£ng chi ti·∫øt chuy√™n c·∫ßn -->
        <section class="table-section">
            <div class="card">
                <div class="card-header">
                    <h2>üìä B√°o c√°o chi ti·∫øt chuy√™n c·∫ßn</h2>
                    <div class="header-actions">
                        <button class="btn btn-secondary btn-small" id="exportBtn">
                            üì• Xu·∫•t Excel
                        </button>
                        <button class="btn btn-secondary btn-small" id="printBtn">
                            üñ®Ô∏è In b√°o c√°o
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table id="reportTable">
                        <thead>
                            <tr>
                                <th>STT</th>
                                <th>H·ªç v√† t√™n</th>
                                <th>T·ªïng bu·ªïi</th>
                                <th>C√≥ m·∫∑t</th>
                                <th>V·∫Øng</th>
                                <th>Tr·ªÖ</th>
                                <th>% Chuy√™n c·∫ßn</th>
                                <th>ƒêi·ªÉm TB</th>
                                <th>ƒêi·ªÉm t·ªïng</th>
                                <th>X·∫øp lo·∫°i</th>
                                <th>Ghi ch√∫</th>
                            </tr>
                        </thead>
                        <tbody id="reportTableBody">
                            <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
                        </tbody>
                    </table>
                    
                    <div id="reportEmptyState" class="empty-state show">
                        <div class="empty-icon">üìä</div>
                        <p>Ch∆∞a c√≥ d·ªØ li·ªáu b√°o c√°o</p>
                        <small>H√£y th√™m h·ªçc vi√™n v√† ƒëi·ªÉm danh ƒë·ªÉ xem b√°o c√°o!</small>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bi·ªÉu ƒë·ªì ph√¢n b·ªë -->
        <section class="chart-section">
            <div class="card">
                <h2>üìà Ph√¢n b·ªë chuy√™n c·∫ßn</h2>
                <div class="chart-container">
                    <div class="chart-bar-group">
                        <div class="chart-bar-item">
                            <div class="chart-bar excellent" id="barExcellent" style="height: 0%"></div>
                            <div class="chart-label">
                                <div class="chart-value" id="countExcellent">0</div>
                                <div class="chart-text">Xu·∫•t s·∫Øc</div>
                            </div>
                        </div>
                        <div class="chart-bar-item">
                            <div class="chart-bar good" id="barGood" style="height: 0%"></div>
                            <div class="chart-label">
                                <div class="chart-value" id="countGood">0</div>
                                <div class="chart-text">Kh√°</div>
                            </div>
                        </div>
                        <div class="chart-bar-item">
                            <div class="chart-bar average" id="barAverage" style="height: 0%"></div>
                            <div class="chart-label">
                                <div class="chart-value" id="countAverage">0</div>
                                <div class="chart-text">Trung b√¨nh</div>
                            </div>
                        </div>
                        <div class="chart-bar-item">
                            <div class="chart-bar warning" id="barWarning" style="height: 0%"></div>
                            <div class="chart-label">
                                <div class="chart-value" id="countWarning">0</div>
                                <div class="chart-text">C·∫£nh b√°o</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Danh s√°ch c·∫£nh b√°o -->
        <section class="warning-section">
            <div class="card">
                <h2>‚ö†Ô∏è Danh s√°ch h·ªçc vi√™n y·∫øu (ƒêi·ªÉm t·ªïng < 5)</h2>
                <div id="warningList" class="warning-list">
                    <!-- S·∫Ω ƒë∆∞·ª£c render b·∫±ng JavaScript -->
                </div>
                <div id="warningEmptyState" class="empty-state show">
                    <div class="empty-icon">‚úÖ</div>
                    <p>Kh√¥ng c√≥ h·ªçc vi√™n n√†o y·∫øu</p>
                    <small>T·∫•t c·∫£ h·ªçc vi√™n ƒë·ªÅu c√≥ ƒëi·ªÉm t·ªïng ‚â• 5</small>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>¬© 2024 L·ªõp Ti·∫øng Nh·∫≠t N5K2 - Dashboard Qu·∫£n L√Ω H·ªçc Vi√™n</p>
        </div>
    </footer>

    <!-- Toast notification -->
    <div id="toast" class="toast"></div>

    <script src="report.js"></script>
    <script src="pwa-init.js"></script>
</body>
</html>
